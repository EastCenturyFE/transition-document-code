(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{109:function(t,i,e){"use strict";var a=e(50);i.a={data:function(){return{canvasDom:"",canvasWH:[0,0],ctx:"",centerPos:[0,0]}},methods:{initCanvas:function(t){var i=this,e=this.$nextTick;return new Promise((function(a){e((function(e){var n=i.$refs,r=i.labelRef,s=i.canvasWH,c=i.centerPos,o=i.canvasDom=n[t];i.labelDom=n[r],s[0]=o.clientWidth,s[1]=o.clientHeight,o.setAttribute("width",s[0]),o.setAttribute("height",s[1]),i.ctx=o.getContext("2d"),c[0]=s[0]/2,c[1]=s[1]/2,a()}))}))},clearCanvas:function(){var t=this.ctx,i=this.canvasWH;t.clearRect.apply(t,[0,0].concat(Object(a.a)(i)))}}}},162:function(t,i,e){},279:function(t,i,e){"use strict";var a=e(162);e.n(a).a},303:function(t,i,e){"use strict";e.r(i);e(82),e(120),e(108),e(35),e(119);var a,n=e(50),r=e(72),s=(e(188),e(189)),c={name:"Draw",mixins:[e(109).a],props:{en:{type:Boolean,default:!1}},data:function(){return{mainColor:"#46bd87",cPMLColor:"#ffe793",bePointColor:["#30e8bd","#ee66aa"],mcPointColor:["#30c9e8","#ee6dee"],mcPointRadius:[5,4],drawAreaWH:[0,0],actionArea:[.7,.5],xPos:0,yPos:0,moveAction:!1,drawAreaOriginPos:[0,0],bezierCurve:[],lineData:"",lineDataTag:"",changedAxisLineData:[],clickPos:[0,0],hitPoint:!1,appendCP:!1}},watch:{hitPoint:function(t){var i=this.bezierCurve,e=this.changeAxis;if(!t)return!1;var a=e(i[t[0]][t[1]]);this.xPos=a[0],this.yPos=a[1]}},methods:{init:(a=Object(s.a)(regeneratorRuntime.mark((function t(){var i,e,a,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.initCanvas,e=this.calcDrawAreaConfig,a=this.initDrawAreaWH,t.next=3,i("canvas");case 3:a(),e(),n=this.initBezierCurveData,r=this.draw,n(),r();case 8:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)}),initDrawAreaWH:function(){var t=Object(r.a)(this.actionArea,2),i=t[0],e=t[1],a=Object(r.a)(this.canvasWH,2),n=a[0],s=a[1];this.drawAreaWH=[i*n,e*s]},calcDrawAreaConfig:function(){var t=this.canvasWH,i=this.drawAreaWH,e=this.drawAreaOriginPos;e[0]=(t[0]-i[0])/2,e[1]=(t[1]-i[1])/2},initBezierCurveData:function(){this.bezierCurve=[];var t=this.bezierCurve,i=this.drawAreaWH,e=this.drawAreaOriginPos;t.push([[e[0],e[1]+i[1]]],[[e[0]+i[0],e[1]]])},draw:function(){var t=this.clearCanvas,i=this.drawGrid,e=this.drawPoints;t(),i(),e();var a=this.drawBezierCurveLine,n=this.drawCPMLine,r=this.calcLineData;a(),n(),r(),(0,this.emitEvent)()},drawGrid:function(){var t=this.ctx,i=this.drawAreaOriginPos,e=this.drawAreaWH,a=this.mainColor;t.strokeStyle=a,t.strokeRect.apply(t,Object(n.a)(i).concat(Object(n.a)(e)))},drawPoints:function(){var t=this.drawItemPoints;this.bezierCurve.forEach((function(i,e){return t(i,e)}))},drawItemPoints:function(t,i){var e=this.ctx,a=this.bezierCurve,r=this.bePointColor,s=this.mcPointColor,c=this.mcPointRadius,o=a.length-1;t.forEach((function(t,a){if((0!==i||1!==a)&&(i!==o||2!==a)&&t){var h=0;0===a?(e.fillStyle=s[0],0===i&&(e.fillStyle=r[0]),i===o&&(e.fillStyle=r[1]),h=c[0]):(e.fillStyle=s[1],h=c[1]),e.beginPath(),e.arc.apply(e,Object(n.a)(t).concat([h,0,2*Math.PI])),e.fill()}}))},drawBezierCurveLine:function(){var t=this.ctx,i=this.bezierCurve,e=this.mainColor,a=i.length-1;t.beginPath(),i.forEach((function(e,r){if(r!==a){0===r&&t.moveTo.apply(t,Object(n.a)(e[0]));var s=i[r+1],c=e[2]||e[0],o=s[1]||s[0],h=s[0];t.bezierCurveTo.apply(t,Object(n.a)(c).concat(Object(n.a)(o),Object(n.a)(h)))}})),t.strokeStyle=e,t.stroke()},drawCPMLine:function(){var t=this.ctx,i=this.cPMLColor,e=this.bezierCurve;t.strokeStyle=i,e.forEach((function(i){var e=i[0];i.forEach((function(i,a){0!==a&&i&&(t.beginPath(),t.moveTo.apply(t,Object(n.a)(e)),t.lineTo.apply(t,Object(n.a)(i)),t.stroke())}))}))},mouseDonwHandler:function(t){var i=t.offsetX,e=t.offsetY,a=this.checkClickIsInDrawArea,n=this.checkClickResult,r=this.bezierCurve,s=this.draw,c=a([i,e]),o=n([i,e]),h=r.length-1;c&&!o&&r.splice(h,0,[[i,e]]),this.appendCP=c&&!o,this.hitPoint=o,this.moveAction=!0,s()},mouseMoveHandler:function(t){var i=t.offsetX,e=t.offsetY,a=this.moveAction,n=this.appendCP,r=this.hitPoint;if(a&&(n||r)){this.clickPos=[i,e];var s=this.doDrag,c=this.draw;s(),c()}},doDrag:function(){var t=this.appendCP,i=this.hitPoint,e=this.moveNewCP,a=this.movePoint;t&&e(),i&&a()},moveNewCP:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.bezierCurve,e=(this.appendCP,this.clickPos),a=this.getNewBeginPoint,n=i.length-2,r=t;!1===r&&(r=n);var s=i[r][0],c=e,o=a(e,s);i[r][1]=o,i[r][2]=c},movePoint:function(){var t=this.hitPoint,i=this.bezierCurve,e=(this.moveNewCP,this.clickPos),a=this.changeAxis,n=i.length-1;if(0!==t[0]&&t[0]!==n){var r=e;if(0===t[1]){var s=i[t[0]-1][0];r[0]<=s[0]&&(r[0]=s[0]+2)}i[t[0]][t[1]]=r;var c=a(r);this.xPos=c[0],this.yPos=c[1]}},getNewBeginPoint:function(t,i){var e=Object(r.a)(t,2),a=e[0],n=e[1],s=Object(r.a)(i,2),c=s[0],o=s[1];return[c-(a-c),o-(n-o)]},mouseUpHandler:function(){this.moveAction=!1},checkClickIsInDrawArea:function(t){var i=Object(r.a)(t,2),e=i[0],a=i[1],n=this.drawAreaOriginPos,s=this.drawAreaWH,c=n[0],o=n[1],h=n[0]+s[0],u=n[1]+s[1];return!(e>h||e<c)&&!(a>u||a<o)},checkClickResult:function(t){var i=this.bezierCurve,e=this.checkIsClickItemPoint,a=!1,n=i.findIndex((function(i,n){return!1!==(a=e(i,n,t))}));return-1!==n&&[n,a]},checkIsClickItemPoint:function(t,i,e){var a=this.checkIsClickPoint,n=t.findIndex((function(t,n){return!1!==a(t,i,n,e)}));return-1!==n&&n},checkIsClickPoint:function(t,i,e,a){var n=this.bezierCurve,r=this.checkClickIsInCircle,s=this.mcPointRadius,c=n.length-1;return(0!==i||1!==e)&&((i!==c||2!==e)&&(!!r(a,t,s[e>0?1:0])&&e))},checkClickIsInCircle:function(t,i,e){var a=Math.abs,n=Math.sqrt,r=a(t[0]-i[0]),s=a(t[1]-i[1]);return n(r*r+s*s)<e},calcLineData:function(){var t=this.calcLineDataString,i=this.calcLineDataStringTag,e=this.changeAxis,a=this.bezierCurve.map((function(t){return t.map((function(t){return t?e(t):""}))}));this.changedAxisLineData=a,t(a),i(a)},calcLineDataString:function(t){var i="[";t.forEach((function(t,e){0===e&&(i+="["),0!==e&&(i+=",["),t.forEach((function(t,e){0!==e&&(i+=", "),i+=t?"[".concat(t[0],", ").concat(t[1],"]"):"['']"})),i+="]"})),i+="]",this.lineData=i},calcLineDataStringTag:function(t){var i="[ ";t.forEach((function(t,e){0===e&&(i+="[ "),0!==e&&(i+=", [ "),t.forEach((function(t,e){0!==e&&(i+=", "),i+=t?"[ <span>".concat(t[0],"</span>, <span>").concat(t[1],"</span> ]"):"[ <span>''</span> ]"})),i+=" ]"})),i+=" ]",this.lineDataTag=i},emitEvent:function(){var t=this.changedAxisLineData;this.$emit("input",t)},changeAxis:function(t){var i=Object(r.a)(t,2),e=i[0],a=i[1],n=Object(r.a)(this.drawAreaOriginPos,2),s=n[0],c=n[1],o=Object(r.a)(this.drawAreaWH,2),h=o[0],u=o[1];return[((e-s)/h).toFixed(3),((a-c)/u).toFixed(3)]},axisChange:function(t){var i=Object(r.a)(t,2),e=i[0],a=i[1],n=Object(r.a)(this.drawAreaOriginPos,2),s=n[0],c=n[1],o=Object(r.a)(this.drawAreaWH,2);return[e*o[0]+s,a*o[1]+c]},deletePoint:function(){var t=this.hitPoint,i=this.bezierCurve,e=this.draw;if(t){t.join("");var a=i.length-1;0!==t[0]&&t[0]!==a&&(0===t[1]&&i.splice(t[0],1),0!==t[1]&&(i[t[0]][t[1]]=""),e())}},reDraw:function(){var t=this.initBezierCurveData,i=this.draw;t(),i()}},mounted:function(){(0,this.init)()}},o=(e(279),e(0)),h=Object(o.a)(c,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"draw"}},[e("div",{staticClass:"action-container"},[e("div",{staticClass:"point-position"},[e("div",[t._v("X:"),e("input",{attrs:{type:"text",placeholder:"xPos",readonly:""},domProps:{value:t.xPos}})]),t._v(" "),e("div",[t._v("Y:"),e("input",{attrs:{type:"text",placeholder:"yPos",readonly:""},domProps:{value:t.yPos}})])]),t._v(" "),e("div",{staticClass:"action"},[e("div",{staticClass:"delete-point",on:{click:t.deletePoint}},[t._v(t._s(t.en?"Delete Point":"删除该点"))]),t._v(" "),e("div",{staticClass:"redraw",on:{click:t.reDraw}},[t._v(t._s(t.en?"Re Draw":"重新绘制"))])])]),t._v(" "),e("div",{staticClass:"linedata",domProps:{innerHTML:t._s(t.lineDataTag)}}),t._v(" "),e("click-to-copy",{attrs:{info:t.lineData}}),t._v(" "),e("div",{staticClass:"canvas-container"},[e("canvas",{ref:"canvas",on:{mousedown:t.mouseDonwHandler,mousemove:t.mouseMoveHandler,mouseup:t.mouseUpHandler}})])],1)}),[],!1,null,null,null);i.default=h.exports}}]);